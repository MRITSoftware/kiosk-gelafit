# üöÄ Guia de Instala√ß√£o R√°pida

## Passo a Passo Completo

### 1Ô∏è‚É£ Instalar Depend√™ncias (5 minutos)

Abra o terminal na pasta do projeto e execute:

```bash
npm install
```

Aguarde a instala√ß√£o de todas as depend√™ncias.

### 2Ô∏è‚É£ Configurar Supabase (10 minutos)

#### A. Criar Bucket de Storage

1. Acesse: https://supabase.com/dashboard
2. Selecione seu projeto
3. Menu lateral: **Storage**
4. Clique: **New bucket**
5. Nome: `documents`
6. Tipo: **Private** ‚úÖ
7. Clique: **Create bucket**

#### B. Configurar Pol√≠ticas do Bucket

1. Clique no bucket `documents`
2. V√° na aba **Policies**
3. Clique em **New Policy**
4. Selecione **For full customization**

**Copie e cole cada pol√≠tica abaixo:**

```sql
-- Pol√≠tica 1: Upload (INSERT)
CREATE POLICY "Allow authenticated uploads"
ON storage.objects FOR INSERT
TO authenticated
WITH CHECK (bucket_id = 'documents');

-- Pol√≠tica 2: Download (SELECT)
CREATE POLICY "Allow authenticated downloads"
ON storage.objects FOR SELECT
TO authenticated
USING (bucket_id = 'documents');

-- Pol√≠tica 3: Atualizar (UPDATE)
CREATE POLICY "Allow team and admin updates"
ON storage.objects FOR UPDATE
TO authenticated
USING (
  bucket_id = 'documents' AND
  EXISTS (
    SELECT 1 FROM public.profiles
    WHERE id = auth.uid() AND role IN ('admin', 'team')
  )
);

-- Pol√≠tica 4: Deletar (DELETE)
CREATE POLICY "Allow admin deletes"
ON storage.objects FOR DELETE
TO authenticated
USING (
  bucket_id = 'documents' AND
  EXISTS (
    SELECT 1 FROM public.profiles
    WHERE id = auth.uid() AND role = 'admin'
  )
);
```

#### C. Criar Tabelas do Banco

1. Menu lateral: **SQL Editor**
2. Clique: **New query**
3. Copie TODO o conte√∫do do arquivo `supabase-setup.sql`
4. Cole no editor
5. Clique: **Run** ‚ñ∂Ô∏è
6. Aguarde a mensagem de sucesso ‚úÖ

### 3Ô∏è‚É£ Criar Primeiro Usu√°rio Admin (3 minutos)

#### A. Criar o Usu√°rio

1. Menu lateral: **Authentication** ‚Üí **Users**
2. Clique: **Add user** ‚Üí **Create new user**
3. Preencha:
   - **Email**: seu-email@exemplo.com
   - **Password**: MinimaSenha123! (m√≠nimo 6 caracteres)
   - ‚úÖ Marque: **Auto Confirm User**
4. Clique: **Create user**

#### B. Definir como Admin

1. Volte para **SQL Editor**
2. Execute este comando (substitua o email):

```sql
UPDATE public.profiles 
SET role = 'admin', full_name = 'Administrador'
WHERE email = 'seu-email@exemplo.com';
```

3. Clique: **Run** ‚ñ∂Ô∏è

### 4Ô∏è‚É£ Verificar Configura√ß√£o do .env.local (1 minuto)

Verifique se existe o arquivo `.env.local` na raiz do projeto com:

```env
NEXT_PUBLIC_SUPABASE_URL=https://base3.muraltv.com.br
NEXT_PUBLIC_SUPABASE_ANON_KEY=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJyb2xlIjoiYW5vbiIsImlzcyI6InN1cGFiYXNlMiIsImlhdCI6MTc0OTc4NjAwMCwiZXhwIjoxOTE3NTUyNDAwfQ.MYmpgQo5ODwqR4Ihv8Fbwn4t2Ev7LR3fud7GpWWrXbU
```

Se n√£o existir, crie manualmente.

### 5Ô∏è‚É£ Iniciar o Servidor (1 minuto)

```bash
npm run dev
```

Aguarde a mensagem:
```
‚úì Ready in Xms
  ‚óã Local:   http://localhost:3000
```

### 6Ô∏è‚É£ Acessar o Sistema

1. Abra o navegador: http://localhost:3000
2. Fa√ßa login com o email e senha do admin
3. üéâ Pronto! Voc√™ est√° no dashboard administrativo

## ‚úÖ Checklist R√°pida

Use este checklist para garantir que tudo est√° configurado:

- [ ] `npm install` executado com sucesso
- [ ] Bucket `documents` criado no Supabase Storage
- [ ] 4 pol√≠ticas de storage configuradas
- [ ] Script SQL `supabase-setup.sql` executado
- [ ] Primeiro usu√°rio criado no Authentication
- [ ] Role 'admin' atribu√≠do ao usu√°rio
- [ ] Arquivo `.env.local` existe e est√° correto
- [ ] `npm run dev` rodando sem erros
- [ ] Login funcionando em http://localhost:3000

## üéØ Pr√≥ximos Passos

Ap√≥s o login como admin:

1. **Criar usu√°rios da equipe:**
   - Menu: Usu√°rios ‚Üí Novo Usu√°rio
   - Role: Equipe

2. **Criar clientes:**
   - Menu: Usu√°rios ‚Üí Novo Usu√°rio
   - Role: Cliente

3. **Testar o fluxo completo:**
   - Fa√ßa logout
   - Login como cliente
   - Envie um documento PDF
   - Logout e login como equipe
   - Visualize e gerencie o documento

## üÜò Problemas Comuns

### Erro: "Invalid bucket"
- ‚úÖ Verifique se o bucket `documents` foi criado
- ‚úÖ Confirme que o nome est√° correto (min√∫sculas)

### Erro: "RLS policy violation"
- ‚úÖ Execute o script SQL completo novamente
- ‚úÖ Verifique se as pol√≠ticas de storage foram criadas

### Erro: "Cannot read properties of null"
- ‚úÖ Confirme que o usu√°rio tem um perfil na tabela `profiles`
- ‚úÖ Execute o UPDATE para definir o role como 'admin'

### N√£o consigo fazer login
- ‚úÖ Verifique se marcou "Auto Confirm User" ao criar o usu√°rio
- ‚úÖ Confirme que a senha tem pelo menos 6 caracteres
- ‚úÖ Tente resetar a senha no dashboard do Supabase

## üìû Precisa de Ajuda?

1. Verifique o arquivo `README.md` para documenta√ß√£o completa
2. Consulte os logs no console do navegador (F12)
3. Revise a documenta√ß√£o do Supabase: https://supabase.com/docs

---

**Tempo total estimado: ~20 minutos** ‚è±Ô∏è


