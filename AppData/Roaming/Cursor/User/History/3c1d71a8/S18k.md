# ğŸš€ Servidorzinho - Modo AutomÃ¡tico

VersÃ£o otimizada para rodar 24h em tablets Android.

## âœ¨ Funcionalidades AutomÃ¡ticas

- âœ… **Auto-reinÃ­cio**: Reinicia automaticamente se a rede cair
- âœ… **Monitoramento**: Verifica conexÃ£o a cada 30 segundos
- âœ… **Background**: Roda em background sem ocupar o terminal
- âœ… **Logs**: Salva tudo em `servidor.log`
- âœ… **Resistente**: Sobrevive a quedas de conexÃ£o

## ğŸ“¦ InstalaÃ§Ã£o

```bash
cd ~/servidorzinho
bash INSTALAR_AUTO.sh
```

## ğŸš€ Uso

### Iniciar em background:
```bash
servidor-auto
```

### Parar:
```bash
servidor-parar
```

### Ver logs:
```bash
tail -f servidor.log
```

### Verificar se estÃ¡ rodando:
```bash
ps aux | grep servidor_auto
```

## ğŸ¤– Iniciar Automaticamente ao Ligar o Tablet

### OpÃ§Ã£o 1: Automate (Gratuito) - RECOMENDADO

1. Instale o app **Automate** (Play Store)
2. Crie um fluxo:
   - **Trigger**: Device Boot
   - **Action**: Shell Command
   - **Command**: `bash ~/servidorzinho/iniciar_auto.sh`

Veja instruÃ§Ãµes detalhadas em `AUTOMATE_SETUP.md`

### OpÃ§Ã£o 2: Tasker (Pago)

Mais poderoso, mas custa ~R$ 15. ConfiguraÃ§Ã£o similar ao Automate.

### OpÃ§Ã£o 3: Script no .bashrc

Adicione ao `~/.bashrc` do Termux:
```bash
if [ ! -f ~/servidorzinho/servidor.pid ] || ! ps -p $(cat ~/servidorzinho/servidor.pid) > /dev/null 2>&1; then
    cd ~/servidorzinho && bash iniciar_auto.sh &
fi
```

## ğŸ”§ DiferenÃ§as do Modo Normal

| Recurso | Modo Normal | Modo Auto |
|---------|-------------|-----------|
| Roda em background | âŒ | âœ… |
| Auto-reinÃ­cio | âŒ | âœ… |
| Monitora conexÃ£o | âŒ | âœ… |
| Logs em arquivo | âŒ | âœ… |
| PID tracking | âŒ | âœ… |

## ğŸ“ ConfiguraÃ§Ã£o

O servidor auto usa o mesmo `local_config.json` do servidor normal.

Para definir o nome do site via variÃ¡vel de ambiente:
```bash
export SITE_NAME="Cozinha"
bash iniciar_auto.sh
```

## ğŸ› ï¸ Troubleshooting

### Servidor nÃ£o inicia
```bash
# Verifique os logs
cat servidor.log

# Verifique se Python estÃ¡ instalado
python3 --version

# Verifique dependÃªncias
pip3 list | grep tinytuya
```

### Servidor para sozinho
```bash
# Verifique o log para erros
tail -50 servidor.log

# Reinicie manualmente
servidor-parar
servidor-auto
```

### Porta jÃ¡ em uso
```bash
# Encontre o processo usando a porta
netstat -tulpn | grep 8080

# Mate o processo
kill <PID>
```

