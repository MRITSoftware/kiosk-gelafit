package com.bootreceiver.app.utilsimport android.content.Contextimport android.content.Intentimport android.content.pm.PackageManagerimport android.util.Log/** * Classe utilit├íria para abrir aplicativos pelo package name *  * Verifica se o app est├í instalado e tenta abri-lo */class AppLauncher(private val context: Context) {        /**     * Tenta abrir um aplicativo pelo seu package name     *      * @param packageName Package name do app (ex: "com.example.app")     * @return true se o app foi aberto com sucesso, false caso contr├írio     */    fun launchApp(packageName: String): Boolean {        return try {            // Verifica se o app est├í instalado            if (!isAppInstalled(packageName)) {                Log.e(TAG, "App n├úo est├í instalado: $packageName")                return false            }                        // Obt├®m o intent para abrir o app            val packageManager = context.packageManager            val launchIntent = packageManager.getLaunchIntentForPackage(packageName)                        if (launchIntent == null) {                Log.e(TAG, "N├úo foi poss├¡vel obter intent para: $packageName")                return false            }                        // Adiciona flags necess├írias para abrir o app            // FLAG_ACTIVITY_NEW_TASK ├® essencial para abrir de um contexto n├úo-Activity            // FLAG_ACTIVITY_CLEAR_TOP garante que n├úo haja m├║ltiplas inst├óncias            // FLAG_ACTIVITY_SINGLE_TOP evita recria├º├úo se j├í estiver no topo            launchIntent.addFlags(Intent.FLAG_ACTIVITY_NEW_TASK)            launchIntent.addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP)            launchIntent.addFlags(Intent.FLAG_ACTIVITY_SINGLE_TOP)            launchIntent.addFlags(Intent.FLAG_ACTIVITY_RESET_TASK_IF_NEEDED)            launchIntent.addFlags(Intent.FLAG_ACTIVITY_REORDER_TO_FRONT)                        // Abre o app            context.startActivity(launchIntent)            Log.d(TAG, "App aberto com sucesso: $packageName")            true                    } catch (e: Exception) {            Log.e(TAG, "Erro ao abrir app: $packageName", e)            false        }    }        /**     * Fecha e reabre um aplicativo (reinicia o app)     *      * @param packageName Package name do app     * @return true se o app foi reiniciado com sucesso     */    fun restartApp(packageName: String): Boolean {        return try {            Log.d(TAG, "­ƒöä ========== REINICIANDO APP ==========")            Log.d(TAG, "Package: $packageName")                        // Verifica se o app est├í instalado            if (!isAppInstalled(packageName)) {                Log.e(TAG, "ÔØî App n├úo est├í instalado: $packageName")                return false            }                        // M├®todo 1: Usar ActivityManager para fechar processos            try {                val activityManager = context.getSystemService(Context.ACTIVITY_SERVICE) as android.app.ActivityManager                                // Fecha processos em background (pode n├úo fechar se estiver em foreground)                activityManager.killBackgroundProcesses(packageName)                Log.d(TAG, "Processos em background finalizados")                                // Aguarda um pouco                Thread.sleep(1000)            } catch (e: Exception) {                Log.w(TAG, "Erro ao finalizar processos: ${e.message}")            }                        // M├®todo 2: Reabrir o app com flags que for├ºam recria├º├úo            try {                val packageManager = context.packageManager                val launchIntent = packageManager.getLaunchIntentForPackage(packageName)                                if (launchIntent == null) {                    Log.e(TAG, "ÔØî N├úo foi poss├¡vel obter intent para: $packageName")                    return false                }                                // Flags para for├ºar rein├¡cio completo                launchIntent.addFlags(Intent.FLAG_ACTIVITY_NEW_TASK)                launchIntent.addFlags(Intent.FLAG_ACTIVITY_CLEAR_TASK)                launchIntent.addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP)                launchIntent.addFlags(Intent.FLAG_ACTIVITY_RESET_TASK_IF_NEEDED)                launchIntent.addFlags(Intent.FLAG_ACTIVITY_SINGLE_TOP)                                // Abre o app                context.startActivity(launchIntent)                Log.d(TAG, "Ô£à App reiniciado com sucesso: $packageName")                return true                            } catch (e: Exception) {                Log.e(TAG, "ÔØî Erro ao reabrir app: ${e.message}", e)                return false            }                    } catch (e: Exception) {            Log.e(TAG, "ÔØî Erro ao reiniciar app: $packageName", e)            false        }    }        /**     * Verifica se um app est├í instalado no dispositivo     */    private fun isAppInstalled(packageName: String): Boolean {        return try {            context.packageManager.getPackageInfo(packageName, 0)            true        } catch (e: PackageManager.NameNotFoundException) {            false        }    }        companion object {        private const val TAG = "AppLauncher"    }}